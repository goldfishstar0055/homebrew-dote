//リーフィアを表示する（16マス）
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>

void dote(int k);

char a[16][16] = //リーフィア1匹目
{
    {0, 0, 0, 3, 3, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0}, //1行
    {0, 0, 3, 4, 1, 0, 0, 0, 0, 0, 0, 0, 3, 3, 0, 0}, //2行
    {0, 1, 4, 4, 1, 6, 0, 0, 0, 0, 1, 1, 4, 3, 0, 0}, //3行
    {0,11, 5, 5, 1, 6, 6, 7, 0, 0,11, 4, 4, 1, 0, 0}, //4行
    {0,11, 5, 1, 0, 8, 7, 7, 0, 0,11, 5, 5, 1, 0, 0}, //5行
    {0,11, 5, 1, 0, 0, 8, 8, 1, 0,11, 5, 1, 0, 0, 0}, //6行
    {0, 2, 2, 3, 1, 8, 8, 8, 1, 3, 2, 2, 1, 0, 0, 0}, //7行
    {0, 3, 2, 2, 8, 8, 2, 2, 1, 2, 2, 2, 2, 1, 0, 0}, //8行
    {0, 0, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1,10,10, 0}, //9行
    {0, 0, 1, 2,12, 2, 2,12, 2, 2, 2, 3, 0,10,10,10}, //10行
    {0, 1, 2, 2,12, 2, 2,12, 2, 2, 1, 0, 0,10,10,10}, //11行
    {0, 1, 9, 2, 2, 2, 2, 2, 9, 2, 1, 0, 8, 0, 0, 0}, //12行
    {0, 0, 3, 9, 2, 2, 2, 2, 2, 9, 0, 8, 8, 0, 0, 0}, //13行
    {0, 5, 0, 1, 1, 1, 1, 1, 1, 1, 7, 1, 1, 0, 1, 1}, //14行
    {0, 0, 5, 5, 8, 8, 2, 2, 2, 1, 1, 0, 0, 1, 5, 1}, //15行
    {0, 0, 0, 1, 8, 2, 2, 2, 2, 2, 1, 1, 1, 6, 6, 1}, //16行
};

char b[16][16] = //リーフィア2匹目
{
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0}, //1行
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 3, 0, 0, 0, 0, 0}, //2行
    {0, 0, 0, 0, 0, 0, 0, 0, 0,11, 3, 1, 0, 0, 0, 0}, //3行
    {1, 1, 1, 0, 0, 6, 0, 0, 0,11,11, 1, 1, 0, 0, 0}, //4行
   {11, 5, 5, 1, 0, 6, 6, 7, 0, 0,11, 5, 1, 0, 0, 0}, //5行
   {11, 5, 5, 1, 0, 0, 7, 7, 1, 0,11, 5, 1, 0,10, 0}, //6行
   {11,11, 2, 1, 1, 0, 8, 8, 1, 3, 2, 2, 1, 0,10,10}, //7行
    {0,11, 2, 2, 1, 8, 8, 8, 1, 2, 2, 2, 2, 1, 0, 0}, //8行
    {0, 0, 1, 2, 8, 8, 2, 2, 2, 2, 2, 2, 1, 0, 0, 0}, //9行
    {0, 0, 1, 2, 2, 2, 2, 2, 2, 2, 2, 3, 0,10, 0, 0}, //10行
    {0, 1, 2,12,12, 2, 2,12,12, 2, 1, 0, 0,10,10, 0}, //11行
    {0, 1, 9, 2, 2, 2, 2, 2, 9, 2, 1, 0, 8, 0, 0, 0}, //12行
    {0, 0, 3, 9, 2, 2, 2, 2, 2, 9, 0, 8, 8, 0, 0, 0}, //13行
    {0, 5, 0, 1, 1, 1, 1, 1, 1, 1, 7, 1, 1, 0, 1, 1}, //14行
    {0, 0, 5, 5, 8, 8, 2, 2, 2, 1, 1, 0, 0, 1, 5, 1}, //15行
    {0, 0, 0, 1, 8, 2, 2, 2, 2, 2, 1, 1, 1, 6, 6, 1}, //16行
};

int color(int x) //リーフィアドット絵関数
{
    if(x == 1) return 52; //輪郭メイン　茶色(1)
    else if(x == 2) return 229; //顔メイン　黄色(5)
    else if(x == 3) return 52; //輪郭アクセント　薄い茶色(18)
    else if(x == 4) return 157; //葉っぱ　耳の上(12)
    else if(x == 5) return 41; //葉っぱ　耳の下とか(7)
    else if(x == 6) return 2; //真ん中葉っぱ　上(6)
    else if(x == 7) return 29; //真ん中葉っぱ　中間(13)
    else if(x == 8) return 22; //真ん中葉っぱ　下(14)(17)
    else if(x == 9) return 219; //ほっぺ(11)
    else if(x == 10) return 1; //ハート(8)
    else if(x == 11) return 124; //耳の中(16)
    else if(x == 12) return 0; //目
    else return 23;
}

int main()
{
    system("afplay tamamusi.mp4 &");  
    for(int k = 0; k < 55; k++){ dote(k); }
    for(int k = 55; k > 0; k--){ dote(k); }
    system("pykill afplay");
    return 0;
}


void dote(int k)
{
    printf("\e[H\e[J\e[?7l");
    for(int i = 0; i < 16; i++){
        printf("%*s", k, "");
        for(int j = 0; j < 16; j++){
            int x = a[i][j];
            if(k % 2 == 1){ x = b[i][j];}
            if(x > 0){
                printf("\e[48;5;%dm", color(x));
            }
            printf("  "); // printf("%2d", x);
            printf("\e[0m");
        }
        printf("\n");
    }
    usleep(150000);
}